@model Initilal_YV_Assesment2.Models.BlogViewModel
@{
    ViewBag.Title = "Index";
}
<style>
    /* ===== PAGE LAYOUT ===== */
    body {
        background-color: #dcdcdc;
    }

    /*.content-area {
        display: flex;
        align-items: flex-start;
        gap: 20px;
    }*/
    /*
    .sidebar-action {
        width: 20%;
        min-width: 200px;
    }*/

    /* ===== LEFT PANEL ===== */

    /*    .left-panel {
        float: left;
        width: 22%;
        background: #e6e6e6;
        padding: 10px;
    }*/

    .toggle-btn {
        width: 100%;
        margin-bottom: 10px;
    }

    .cat-item {
        padding: 8px;
        border-bottom: 1px solid #ccc;
    }

        .cat-item a {
            text-decoration: none;
            color: black;
        }

        .cat-item.all {
            font-weight: bold;
        }

    /* ===== POSTS ===== */

    /*    .posts-area {
        width: 78%;
        padding: 20px;
    }*/

    .title {
        font-family: serif;
    }

    .post-box {
        background-color: white;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        border-left: 5px solid #666;
        /*background: white;
        margin-bottom: 15px;
        padding: 15px;
        border-radius: 4px;*/
    }

    .meta {
        color: gray;
        font-size: 13px;
        margin-bottom: 8px;
    }

    .read-more {
        text-align: right;
        font-weight: bold;
    }
</style>

<div class="container-fluid mt-4">
    <div class="row">

        <div class="col-12 col-lg-2 mb-3 mb-lg-0">
            <br />
            <a class="btn btn-light" data-bs-toggle="offcanvas" href="#offcanvasCategories" role="button" aria-controls="offcanvasCategories">
                Browse by Category
            </a>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasCategories" aria-labelledby="offcanvasCategoriesLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasCategoriesLabel">Categories</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div id="catList">

                        <div class="cat-item all">
                            @Html.ActionLink("VIEW ALL POSTS", "Index", "Blog")
                        </div>

                        @foreach (var cat in Model.Categories)
                        {
                            <div class="cat-item">
                                @Html.ActionLink(cat.Name, "Index", new { categoryId = cat.CategoryId })
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== POSTS AREA ===== -->
        <div class="col-12 col-lg-10">

            <h2 class="title mb-4">Mefisto Theatre Blog</h2>

            @foreach (var post in Model.Posts)
            {
                <div class="post-box mb-3 p-3 bg-white rounded shadow-sm">

                    <h4>@post.Title</h4>

                    <div class="meta text-muted small mb-2">
                        Category: @post.Category.Name <br />
                        Author: @post.User.UserName
                    </div>

                    <p>
                        @(post.Content?.Length > 220
                            ? post.Content.Substring(0, 220) + "..."
                            : post.Content)
                    </p>

                    <div class="text-end fw-bold">
                        @Html.ActionLink("READ MORE NOW ➜", "Details", new { id = post.PostId })
                    </div>

                </div>
            }

        </div>

    </div>
</div>